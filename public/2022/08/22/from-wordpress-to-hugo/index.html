<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>Migrating from WordPress to Hugo | Lopeztel&#39;s Blog</title>
<meta name="keywords" content="100DaysToOffload, selfhosting, blog">
<meta name="description" content="I&rsquo;ve been toying with the idea for a while, and now I finally found time to get to it (more like I used the project as an excuse to not go out and exercise :P)
The whole thing started with finding this blog post and realizing I could just host my own static website from my yunohost raspberrypi setup, so the journey began
I was gladly surprised by the fact that Hugo is easy to install in Arch or Arch based Linux distros (such as my main desktop&rsquo;s Manjaro install):">
<meta name="author" content="lopeztel">
<link rel="canonical" href="https://lopeztel.xyz/blog/2022/08/22/from-wordpress-to-hugo/">
<link crossorigin="anonymous" href="/blog/assets/css/stylesheet.b183800e2cfbb62c3bce2b2ba56cdb2dd33af76c75cf4550173d5dfebd7c68a6.css" integrity="sha256-sYOADiz7tiw7zisrpWzbLdM692x1z0VQFz1d/r18aKY=" rel="preload stylesheet" as="style">
<link rel="icon" href="https://lopeztel.xyz/blog/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="https://lopeztel.xyz/blog/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://lopeztel.xyz/blog/favicon-32x32.png">
<link rel="apple-touch-icon" href="https://lopeztel.xyz/blog/apple-touch-icon.png">
<link rel="mask-icon" href="https://lopeztel.xyz/blog/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --hljs-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript><meta property="og:title" content="Migrating from WordPress to Hugo" />
<meta property="og:description" content="I&rsquo;ve been toying with the idea for a while, and now I finally found time to get to it (more like I used the project as an excuse to not go out and exercise :P)
The whole thing started with finding this blog post and realizing I could just host my own static website from my yunohost raspberrypi setup, so the journey began
I was gladly surprised by the fact that Hugo is easy to install in Arch or Arch based Linux distros (such as my main desktop&rsquo;s Manjaro install):" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://lopeztel.xyz/blog/2022/08/22/from-wordpress-to-hugo/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-08-22T19:37:10&#43;02:00" />
<meta property="article:modified_time" content="2022-08-22T19:37:10&#43;02:00" /><meta property="og:site_name" content="Lopeztel&#39;s blog" />

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Migrating from WordPress to Hugo"/>
<meta name="twitter:description" content="I&rsquo;ve been toying with the idea for a while, and now I finally found time to get to it (more like I used the project as an excuse to not go out and exercise :P)
The whole thing started with finding this blog post and realizing I could just host my own static website from my yunohost raspberrypi setup, so the journey began
I was gladly surprised by the fact that Hugo is easy to install in Arch or Arch based Linux distros (such as my main desktop&rsquo;s Manjaro install):"/>


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "Posts",
      "item": "https://lopeztel.xyz/blog/posts/"
    }, 
    {
      "@type": "ListItem",
      "position":  3 ,
      "name": "Migrating from WordPress to Hugo",
      "item": "https://lopeztel.xyz/blog/2022/08/22/from-wordpress-to-hugo/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Migrating from WordPress to Hugo",
  "name": "Migrating from WordPress to Hugo",
  "description": "I\u0026rsquo;ve been toying with the idea for a while, and now I finally found time to get to it (more like I used the project as an excuse to not go out and exercise :P)\nThe whole thing started with finding this blog post and realizing I could just host my own static website from my yunohost raspberrypi setup, so the journey began\nI was gladly surprised by the fact that Hugo is easy to install in Arch or Arch based Linux distros (such as my main desktop\u0026rsquo;s Manjaro install):",
  "keywords": [
    "100DaysToOffload", "selfhosting", "blog"
  ],
  "articleBody": "I’ve been toying with the idea for a while, and now I finally found time to get to it (more like I used the project as an excuse to not go out and exercise :P)\nThe whole thing started with finding this blog post and realizing I could just host my own static website from my yunohost raspberrypi setup, so the journey began\nI was gladly surprised by the fact that Hugo is easy to install in Arch or Arch based Linux distros (such as my main desktop’s Manjaro install):\nsudo pacman -Syu hugo\nThen I started by going into the quick start guide and picked the papermod theme from the big list of available themes\nFor the record I liked themes Archie and Terminal too\nFirst tests I started with a demo website importing the theme as a git submodule:\n1 2 3 4 hugo new site lopeztel_blog -f yml cd lopeztel_blog git init git submodule add https://github.com/adityatelange/hugo-PaperMod.git themes/PaperMod After this I spent a lot of time playing with the configuration file config.yml\nExporting blog posts Then it was time to look for a way to export all my posts from WordPress and found some alternatives, I chose wordpress-to-hugo-exporter because of the ease of use, it was easy to download the repo as a .zip and upload to my WordPress instance, then load it as a plugin, activate it, go to the dashboard -\u003e Tools -\u003e Export to Hugo\nTo be honest I panicked a little when I saw the message Nginx not found or something on my web browser but upon ssh-ing into my serve I saw that the files were exported successfully under /tmp/\nFixing WordPress “inline HTML garbage” After inspecting the .md files and copying them under /content/posts/ and reading on how to set up the blog’s archive, I realized that all the posts were available through the tags link but not listed in the archive. All because of the added WordPress type. Also, my links were broken because link notation is not markdown(I call it inline HTML, but I may be wrong), example:\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 --- title: 'Making another split keyboard: Lily58 QMK edition' author: lopeztel type: post date: 2022-05-17T19:32:55+00:00 url: /2022/05/17/making-another-split-keyboard-lily58-qmk-edition/ mf2_syndication: - 'a:0:{}' categories: - Uncategorized tags: - 100DaysToOffload - SplitKeyboard --- With the previous success (see \u003ca href=\"https://lopeztel.xyz/2021/06/02/making-a-bluetooth-split-keyboard-part-1/\" target=\"_blank\" rel=\"noreferrer noopener\"\u003epart1\u003c/a\u003e, \u003ca href=\"https://lopeztel.xyz/2021/07/05/making-a-bluetooth-split-keyboard-part-1-a/\" target=\"_blank\" rel=\"noreferrer noopener\"\u003epart1-a\u003c/a\u003e and \u003ca href=\"https://lopeztel.xyz/2021/09/15/making-a-bluetooth-split-keyboard-part-2/\" target=\"_blank\" rel=\"noreferrer noopener\"\u003epart2\u003c/a\u003e) in making a bluetooth keyboard, I decided to make another keyboard with a different approach: So I had to delete that line from every file, using the live grep functionality from Neovim Telescope live grep proved useful, not too bad.\nAnother problem was the link format I got from WordPress, had to fix it by using some clever but cumbersome regex. Examples:\n1 2 Autonomie theme #100DaysToOffload both change to:\n1 2 [Autonomie theme](https://github.com/pfefferle/Autonomie) [#100DaysToOffload](https://lopeztel.xyz/tag/100daystooffload/) After issuing the following command in neovim:\n1 :%s/\\([^*\u003c]*\\).\\{-}\u003e/[\\2](\\1)/g Another example:\n1 2 3 #!/bin/bash modprobe v4l2loopback exclusive_caps=1 max_buffers=2 gphoto2 --stdout --capture-movie | ffmpeg -i - -vcodec rawvideo -pix_fmt yuv420 -threads 0 -f v4l2 /dev/video0 Changes to:\n1 2 3 #!/bin/bash modprobe v4l2loopback exclusive_caps=1 max_buffers=2 gphoto2 --stdout --capture-movie | ffmpeg -i - -vcodec rawvideo -pix_fmt yuv420 -threads 0 -f v4l2 /dev/video0 After issuinf the following commands in neovim:\n1 2 :%s/",
  "wordCount" : "627",
  "inLanguage": "en",
  "datePublished": "2022-08-22T19:37:10+02:00",
  "dateModified": "2022-08-22T19:37:10+02:00",
  "author":{
    "@type": "Person",
    "name": "lopeztel"
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://lopeztel.xyz/blog/2022/08/22/from-wordpress-to-hugo/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "Lopeztel's Blog",
    "logo": {
      "@type": "ImageObject",
      "url": "https://lopeztel.xyz/blog/favicon.ico"
    }
  }
}
</script>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://lopeztel.xyz/blog" accesskey="h" title="Lopeztel&#39;s Blog (Alt + H)">Lopeztel&#39;s Blog</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="https://lopeztel.xyz/blog/archives/" title="archives">
                    <span>archives</span>
                </a>
            </li>
            <li>
                <a href="https://lopeztel.xyz/blog/posts/" title="posts">
                    <span>posts</span>
                </a>
            </li>
            <li>
                <a href="https://lopeztel.xyz/blog/search/" title="search (Alt &#43; /)" accesskey=/>
                    <span>search</span>
                </a>
            </li>
            <li>
                <a href="https://lopeztel.xyz/blog/tags/" title="tags">
                    <span>tags</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    <div class="breadcrumbs"><a href="https://lopeztel.xyz/blog">Home</a>&nbsp;»&nbsp;<a href="https://lopeztel.xyz/blog/posts/">Posts</a></div>
    <h1 class="post-title">
      Migrating from WordPress to Hugo
    </h1>
    <div class="post-meta"><span title='2022-08-22 19:37:10 +0200 CEST'>August 22, 2022</span>&nbsp;·&nbsp;3 min&nbsp;·&nbsp;lopeztel

</div>
  </header> <div class="toc">
    <details >
        <summary accesskey="c" title="(Alt + C)">
            <span class="details">Table of Contents</span>
        </summary>

        <div class="inner"><ul>
                <li>
                    <a href="#first-tests" aria-label="First tests">First tests</a></li>
                <li>
                    <a href="#exporting-blog-posts" aria-label="Exporting blog posts">Exporting blog posts</a></li>
                <li>
                    <a href="#fixing-wordpress-inline-html-garbage" aria-label="Fixing WordPress &amp;ldquo;inline HTML garbage&amp;rdquo;">Fixing WordPress &ldquo;inline HTML garbage&rdquo;</a></li>
                <li>
                    <a href="#using-my-own-piwigo-instance-as-a-cdn" aria-label="Using my own Piwigo instance as a CDN">Using my own Piwigo instance as a CDN</a>
                </li>
            </ul>
        </div>
    </details>
</div>

  <div class="post-content"><p>I&rsquo;ve been toying with the idea for a while, and now I finally found time to get to it
(more like I used the project as an excuse to not go out and exercise :P)</p>
<p>The whole thing started with finding <a href="https://blog.arkadi.one/p/how-to-use-hugo-with-yunohost/">this blog
post</a> and realizing I
could just host my own static website from my yunohost raspberrypi setup, so the
journey began</p>
<p>I was gladly surprised by the fact that Hugo is easy to install in Arch or Arch based
Linux distros (such as my main desktop&rsquo;s Manjaro install):</p>
<p><code>sudo pacman -Syu hugo</code></p>
<p>Then I started by going into the <a href="https://gohugo.io/getting-started/quick-start/">quick start
guide</a> and picked the <a href="https://themes.gohugo.io/themes/hugo-papermod/">papermod
theme</a> from the <a href="https://themes.gohugo.io/">big list of
available themes</a></p>
<p>For the record I liked themes <a href="https://themes.gohugo.io/themes/archie/">Archie</a>
and <a href="https://themes.gohugo.io/themes/hugo-theme-terminal/">Terminal</a> too</p>
<h2 id="first-tests">First tests<a hidden class="anchor" aria-hidden="true" href="#first-tests">#</a></h2>
<p>I started with a demo website importing the theme as a git submodule:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt" id="hl-0-1"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-0-1">1</a>
</span><span class="lnt" id="hl-0-2"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-0-2">2</a>
</span><span class="lnt" id="hl-0-3"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-0-3">3</a>
</span><span class="lnt" id="hl-0-4"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-0-4">4</a>
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">hugo new site lopeztel_blog -f yml
</span></span><span class="line"><span class="cl"><span class="nb">cd</span> lopeztel_blog
</span></span><span class="line"><span class="cl">git init
</span></span><span class="line"><span class="cl">git submodule add https://github.com/adityatelange/hugo-PaperMod.git themes/PaperMod 
</span></span></code></pre></td></tr></table>
</div>
</div><p>After this I spent a lot of time playing with the configuration file <code>config.yml</code></p>
<h2 id="exporting-blog-posts">Exporting blog posts<a hidden class="anchor" aria-hidden="true" href="#exporting-blog-posts">#</a></h2>
<p>Then it was time to look for a way to export all my posts from WordPress and
found some <a href="https://gohugo.io/tools/migrations/#wordpress">alternatives</a>, I
chose
<a href="https://github.com/SchumacherFM/wordpress-to-hugo-exporter">wordpress-to-hugo-exporter</a>
because of the ease of use, it was easy to download the repo as a .zip and
upload to my WordPress instance, then load it as a plugin, activate it, go to
the dashboard -&gt; Tools -&gt; Export to Hugo</p>
<p>To be honest I panicked a little when I saw the message Nginx not found or
something on my web browser but upon ssh-ing into my serve I saw that the files
were exported successfully under <code>/tmp/</code></p>
<h2 id="fixing-wordpress-inline-html-garbage">Fixing WordPress &ldquo;inline HTML garbage&rdquo;<a hidden class="anchor" aria-hidden="true" href="#fixing-wordpress-inline-html-garbage">#</a></h2>
<p>After inspecting the .md files and copying them under <code>/content/posts/</code> and
reading on how to set up the <a href="https://adityatelange.github.io/hugo-PaperMod/posts/papermod/papermod-features/#archives-layout">blog&rsquo;s
archive</a>,
I realized that all the posts were available through the tags link but not
listed in the archive.  All because of the added WordPress type. Also, my links
were broken because link notation is not markdown(I call it inline HTML, but I
may be wrong), example:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt" id="hl-1-1"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-1-1"> 1</a>
</span><span class="lnt" id="hl-1-2"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-1-2"> 2</a>
</span><span class="lnt" id="hl-1-3"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-1-3"> 3</a>
</span><span class="lnt" id="hl-1-4"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-1-4"> 4</a>
</span><span class="lnt" id="hl-1-5"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-1-5"> 5</a>
</span><span class="lnt" id="hl-1-6"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-1-6"> 6</a>
</span><span class="lnt" id="hl-1-7"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-1-7"> 7</a>
</span><span class="lnt" id="hl-1-8"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-1-8"> 8</a>
</span><span class="lnt" id="hl-1-9"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-1-9"> 9</a>
</span><span class="lnt" id="hl-1-10"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-1-10">10</a>
</span><span class="lnt" id="hl-1-11"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-1-11">11</a>
</span><span class="lnt" id="hl-1-12"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-1-12">12</a>
</span><span class="lnt" id="hl-1-13"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-1-13">13</a>
</span><span class="lnt" id="hl-1-14"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-1-14">14</a>
</span><span class="lnt" id="hl-1-15"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-1-15">15</a>
</span><span class="lnt" id="hl-1-16"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-1-16">16</a>
</span><span class="lnt" id="hl-1-17"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-1-17">17</a>
</span><span class="lnt" id="hl-1-18"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-1-18">18</a>
</span><span class="lnt" id="hl-1-19"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-1-19">19</a>
</span><span class="lnt" id="hl-1-20"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-1-20">20</a>
</span><span class="lnt" id="hl-1-21"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-1-21">21</a>
</span><span class="lnt" id="hl-1-22"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-1-22">22</a>
</span><span class="lnt" id="hl-1-23"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-1-23">23</a>
</span><span class="lnt" id="hl-1-24"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-1-24">24</a>
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-markdown" data-lang="markdown"><span class="line"><span class="cl">---
</span></span><span class="line"><span class="cl">title: &#39;Making another split keyboard: Lily58 QMK edition&#39;
</span></span><span class="line"><span class="cl">author: lopeztel
</span></span><span class="line"><span class="cl"><span class="c">&lt;!-- this is the line that caused the most issues, wordpress specific --&gt;</span>
</span></span><span class="line"><span class="cl">type: post
</span></span><span class="line"><span class="cl">date: 2022-05-17T19:32:55+00:00
</span></span><span class="line"><span class="cl">url: /2022/05/17/making-another-split-keyboard-lily58-qmk-edition/
</span></span><span class="line"><span class="cl">mf2_syndication:
</span></span><span class="line"><span class="cl">  <span class="k">-</span> &#39;a:0:{}&#39;
</span></span><span class="line"><span class="cl">categories:
</span></span><span class="line"><span class="cl">  <span class="k">-</span> Uncategorized
</span></span><span class="line"><span class="cl">tags:
</span></span><span class="line"><span class="cl">  <span class="k">-</span> 100DaysToOffload
</span></span><span class="line"><span class="cl">  <span class="k">-</span> SplitKeyboard
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">---
</span></span><span class="line"><span class="cl">With the previous success (see <span class="p">&lt;</span><span class="nt">a</span>
</span></span><span class="line"><span class="cl"><span class="na">href</span><span class="o">=</span><span class="s">&#34;https://lopeztel.xyz/2021/06/02/making-a-bluetooth-split-keyboard-part-1/&#34;</span>
</span></span><span class="line"><span class="cl"><span class="na">target</span><span class="o">=</span><span class="s">&#34;_blank&#34;</span> <span class="na">rel</span><span class="o">=</span><span class="s">&#34;noreferrer noopener&#34;</span><span class="p">&gt;</span>part1<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>, <span class="p">&lt;</span><span class="nt">a</span>
</span></span><span class="line"><span class="cl"><span class="na">href</span><span class="o">=</span><span class="s">&#34;https://lopeztel.xyz/2021/07/05/making-a-bluetooth-split-keyboard-part-1-a/&#34;</span>
</span></span><span class="line"><span class="cl"><span class="na">target</span><span class="o">=</span><span class="s">&#34;_blank&#34;</span> <span class="na">rel</span><span class="o">=</span><span class="s">&#34;noreferrer noopener&#34;</span><span class="p">&gt;</span>part1-a<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span> and <span class="p">&lt;</span><span class="nt">a</span>
</span></span><span class="line"><span class="cl"><span class="na">href</span><span class="o">=</span><span class="s">&#34;https://lopeztel.xyz/2021/09/15/making-a-bluetooth-split-keyboard-part-2/&#34;</span>
</span></span><span class="line"><span class="cl"><span class="na">target</span><span class="o">=</span><span class="s">&#34;_blank&#34;</span> <span class="na">rel</span><span class="o">=</span><span class="s">&#34;noreferrer noopener&#34;</span><span class="p">&gt;</span>part2<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>) in making a bluetooth
</span></span><span class="line"><span class="cl">keyboard, I decided to make another keyboard with a different approach:
</span></span></code></pre></td></tr></table>
</div>
</div><p>So I had to delete that line from every file, using the live grep functionality
from <a href="https://github.com/nvim-telescope/telescope.nvim#usage">Neovim Telescope live
grep</a> proved useful,
not too bad.</p>
<p>Another problem was the link format I got from WordPress, had to fix it by
using some clever but cumbersome regex. Examples:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt" id="hl-2-1"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-2-1">1</a>
</span><span class="lnt" id="hl-2-2"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-2-2">2</a>
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">&lt;a href=&#34;https://github.com/pfefferle/Autonomie&#34; target=&#34;_blank&#34; rel=&#34;noreferrer noopener&#34;&gt;Autonomie theme&lt;/a&gt; &lt;/figcaption&gt;&lt;/figure&gt;
</span></span><span class="line"><span class="cl">&lt;a rel=&#34;tag&#34; class=&#34;u-tag u-category&#34; href=&#34;https://lopeztel.xyz/tag/100daystooffload/&#34;&gt;#100DaysToOffload&lt;/a&gt;
</span></span></code></pre></td></tr></table>
</div>
</div><p>both change to:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt" id="hl-3-1"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-3-1">1</a>
</span><span class="lnt" id="hl-3-2"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-3-2">2</a>
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">[Autonomie theme](https://github.com/pfefferle/Autonomie)
</span></span><span class="line"><span class="cl">[#100DaysToOffload](https://lopeztel.xyz/tag/100daystooffload/)
</span></span></code></pre></td></tr></table>
</div>
</div><p>After issuing the following command in neovim:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt" id="hl-4-1"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-4-1">1</a>
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">:%s/&lt;a.\{-}href=&#34;\([^*&#34;]*\)\{-}&gt;\([^*&lt;]*\).\{-}&gt;/[\2](\1)/g
</span></span></code></pre></td></tr></table>
</div>
</div><p>Another example:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt" id="hl-5-1"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-5-1">1</a>
</span><span class="lnt" id="hl-5-2"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-5-2">2</a>
</span><span class="lnt" id="hl-5-3"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-5-3">3</a>
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">&lt;pre class=&#34;wp-block-code&#34;&gt;&lt;code&gt;#!/bin/bash
</span></span><span class="line"><span class="cl">modprobe v4l2loopback exclusive_caps=1 max_buffers=2
</span></span><span class="line"><span class="cl">gphoto2 --stdout --capture-movie | ffmpeg -i - -vcodec rawvideo -pix_fmt yuv420 -threads 0 -f v4l2 /dev/video0&lt;/code&gt;&lt;/pre&gt;
</span></span></code></pre></td></tr></table>
</div>
</div><p>Changes to:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt" id="hl-6-1"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-6-1">1</a>
</span><span class="lnt" id="hl-6-2"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-6-2">2</a>
</span><span class="lnt" id="hl-6-3"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-6-3">3</a>
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="cp">#!/bin/bash
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>modprobe v4l2loopback <span class="nv">exclusive_caps</span><span class="o">=</span><span class="m">1</span> <span class="nv">max_buffers</span><span class="o">=</span><span class="m">2</span>
</span></span><span class="line"><span class="cl">gphoto2 --stdout --capture-movie <span class="p">|</span> ffmpeg -i - -vcodec rawvideo -pix_fmt yuv420 -threads <span class="m">0</span> -f v4l2 /dev/video0
</span></span></code></pre></td></tr></table>
</div>
</div><p>After issuinf the following commands in neovim:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt" id="hl-7-1"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-7-1">1</a>
</span><span class="lnt" id="hl-7-2"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-7-2">2</a>
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">:%s/&lt;pre .*&lt;code&gt;/```\r
</span></span><span class="line"><span class="cl">:%s/&lt;\/code&gt;&lt;\/pre&gt;/\r```
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="using-my-own-piwigo-instance-as-a-cdn">Using my own Piwigo instance as a CDN<a hidden class="anchor" aria-hidden="true" href="#using-my-own-piwigo-instance-as-a-cdn">#</a></h2>
<p>To serve the pictures and media I just uploaded everything to a public album
in my piwigo instance</p>
<hr>
<p>Day 3 of my 2022&rsquo;s <a href="https://lopeztel.xyz/blog/tags/100daystooffload/">#100DaysToOffload</a></p>
<p>Join <a href="https://100daystooffload.com/">100DaysToOffload</a></p>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="https://lopeztel.xyz/blog/tags/100daystooffload/">100DaysToOffload</a></li>
      <li><a href="https://lopeztel.xyz/blog/tags/selfhosting/">Selfhosting</a></li>
      <li><a href="https://lopeztel.xyz/blog/tags/blog/">blog</a></li>
    </ul>
<nav class="paginav">
  <a class="next" href="https://lopeztel.xyz/blog/2022/05/17/making-another-split-keyboard-lily58-qmk-edition/">
    <span class="title">Next »</span>
    <br>
    <span>Making another split keyboard: Lily58 QMK edition</span>
  </a>
</nav>

  </footer>
</article>
    </main>
    
<footer class="footer">
    <span>&copy; 2022 <a href="https://lopeztel.xyz/blog">Lopeztel&#39;s Blog</a></span>
    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerHTML = 'copy';

        function copyingDone() {
            copybutton.innerHTML = 'copied!';
            setTimeout(() => {
                copybutton.innerHTML = 'copy';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>
</body>

</html>
